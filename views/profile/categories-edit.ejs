<%- include('../includes/head.ejs') %>

<body id="page-top">
  <%- include('../includes/navbar.ejs') %>
  <div id="wrapper">
    <!-- Sidebar -->
    <ul class="sidebar navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="#">
          <i class="fas fa-fw fa-home"></i>
          <span>Összes hír</span>
        </a>
      </li>
      <% if(logged == 1){ %>
      <li class="nav-item">
        <a class="nav-link" href="/stiri-configurate">
          <i class="fas fa-fw fa-users"></i>
          <span>Híreid</span>
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="/profile/history">
          <i class="fas fa-fw fa-history"></i>
          <span>Előzmények</span>
        </a>
      </li>
      <% } %>

      <li class="nav-item">
        <a class="nav-link" href="/channels">
          <i class="fas fa-fw fa-users"></i>
          <span>Hírportálok</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/categorii">
          <i class="fas fa-fw fa-list-alt"></i>
          <span>Kategóriák</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/important">
          <i class="fas fa-fw fa-bell"></i>
          <span>Fontos</span>
        </a>
      </li>
      <% if(logged == 0){ %>
      <li class="nav-item">
        <a class="nav-link" href="/autentificare/login">
          <i class="fas fa-fw fa-user-alt"></i>
          <span>Belépés</span>
        </a>
      </li>
      <% } %>
    </ul>
    <div id="content-wrapper">
      <div class="container-fluid upload-details">
        <div class="row">
          <div class="col-lg-12">
            <div class="main-title">
              <h6>Jelöld be azokat a kategóriákat, amelyek érdekelnek</h6>
            </div>
          </div>
        </div>
        <script>
          $(document).ready(function () {
            $(".statusCategory-checkbox").click(function () {
              var extraId = $(this).attr("data-categoryId");
              if ($(this).is(":checked")) {
                $(".statusCategory-" + extraId).val("on");
              } else {
                $(".statusCategory-" + extraId).val("off");
              }
            });
          });
        </script>
        <% for (let i = 0; i < activeSwitch.length; i++) { %> <% if
        (activeSwitch[i].active == 1) { %>
        <script>
          $(document).ready(function () {
            var activeCheckbox = "<%= activeSwitch[i].categoryId %>";
            $(".statusCategory-checkbox-" + activeCheckbox).prop(
              "checked",
              true
            );
            $(".statusCategory-" + activeCheckbox).val("on");
          });
        </script>
        <% } %> <% } %>
        <form
          name="myForm"
          class="ms-content-wrapper"
          action="/action/edit-categories"
          method="POST"
          enctype="multipart/form-data"
        >
          <div class="row">
            <div class="col-sm-12">
              <div class="form-group">
                <div class="form-group">
                  <% for (let i=0; i < categories.length; i++ ) { %>
                  <input
                    type="hidden"
                    value="<%= categories[i].id %>"
                    name="categoryId"
                  />
                  <input
                    type="hidden"
                    value="off"
                    class="statusCategory-<%= categories[i].id %> status-hidden-box"
                    name="statusCategory[<%= categories[i].id %>]"
                  />

                  <div class="form-check form-switch">
                    <input
                      class="form-check-input statusCategory-checkbox statusCategory-checkbox-<%= categories[i].id %>"
                      type="checkbox"
                      id="flexSwitchCheckDefault<%= categories[i].id %>"
                      data-categoryId="<%= categories[i].id %>"
                    />

                    <label
                      style="font-size: 14px !important;"
                      class="form-check-label"
                      for="flexSwitchCheckDefault<%= categories[i].id %>"
                      ><%= categories[i].CategoryTranslations[0].name %></label
                    >
                  </div>
                  <% } %>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-12 text-right">
              <button type="submit" class="btn btn-success border-none">
                Módosítások mentése
              </button>
            </div>
          </div>
        </form>
      </div>
      <!-- /.container-fluid -->
      <!-- Sticky Footer -->
      <%- include('../includes/footer.ejs') %>
    </div>
    <!-- /.content-wrapper -->
  </div>
  <!-- /#wrapper -->
  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>
  <!-- Logout Modal-->
  <div
    class="modal fade"
    id="logoutModal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
          <button
            class="close"
            type="button"
            data-dismiss="modal"
            aria-label="Close"
          >
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          Select "Logout" below if you are ready to end your current session.
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">
            Cancel
          </button>
          <a class="btn btn-primary" href="login.html">Logout</a>
        </div>
      </div>
    </div>
  </div>
  <!-- Bootstrap core JavaScript-->
  <script src="/vendor/jquery/jquery.min.js"></script>
  <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <!-- Core plugin JavaScript-->
  <script src="/vendor/jquery-easing/jquery.easing.min.js"></script>
  <!-- Owl Carousel -->
  <script src="/vendor/owl-carousel/owl.carousel.js"></script>
  <!-- Custom scripts for all pages-->
  <script src="/js/custom.js"></script>
</body>
>
